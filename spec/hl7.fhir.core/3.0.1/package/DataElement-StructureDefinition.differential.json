{"resourceType":"DataElement","id":"StructureDefinition.differential","meta":{"lastUpdated":"2017-04-19T07:44:43.294+10:00"},"url":"http://hl7.org/fhir/DataElement/StructureDefinition.differential","status":"draft","experimental":true,"stringency":"fully-specified","element":[{"id":"StructureDefinition.differential","path":"StructureDefinition.differential","short":"Differential view of the structure","definition":"A differential view is expressed relative to the base StructureDefinition - a statement of differences that it applies.","min":0,"max":"1","type":[{"code":"BackboneElement"}],"condition":["sdf-6"],"constraint":[{"key":"ele-1","severity":"error","human":"All FHIR elements must have a @value or children","expression":"hasValue() | (children().count() > id.count())","xpath":"@value|f:*|h:div","source":"Element"},{"key":"sdf-15a","requirements":"No Type on the root element (differential)","severity":"error","human":"If the first element in a differential has no \".\" in the path, it has no type","expression":"element.first().path.contains('.').not() implies element.first().type.empty()","xpath":"not(f:element[1][not(contains(f:path/@value, '.'))]/f:type)"},{"key":"sdf-20","requirements":"no slicing on root","severity":"error","human":"No slicing on the root element","expression":"element.first().slicing.empty()","xpath":"not(f:element[1]/f:slicing)"},{"key":"sdf-8a","severity":"error","human":"In any differential, all the elements must be in the specified type","expression":"element.first().path.startsWith(%resource.type) and element.tail().all(path.startsWith(%resource.type&'.'))","xpath":"count(f:element)=count(f:element[f:path/@value=ancestor::f:StructureDefinition/f:type/@value or starts-with(f:path/@value, concat(ancestor::f:StructureDefinition/f:type/@value, '.'))])"}]}]}