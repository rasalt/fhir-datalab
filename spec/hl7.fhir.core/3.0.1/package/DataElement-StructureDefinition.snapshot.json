{"resourceType":"DataElement","id":"StructureDefinition.snapshot","meta":{"lastUpdated":"2017-04-19T07:44:43.294+10:00"},"url":"http://hl7.org/fhir/DataElement/StructureDefinition.snapshot","status":"draft","experimental":true,"stringency":"fully-specified","element":[{"id":"StructureDefinition.snapshot","path":"StructureDefinition.snapshot","short":"Snapshot view of the structure","definition":"A snapshot view is expressed in a stand alone form that can be used and interpreted without considering the base StructureDefinition.","min":0,"max":"1","type":[{"code":"BackboneElement"}],"condition":["sdf-6"],"constraint":[{"key":"ele-1","severity":"error","human":"All FHIR elements must have a @value or children","expression":"hasValue() | (children().count() > id.count())","xpath":"@value|f:*|h:div","source":"Element"},{"key":"sdf-15","requirements":"No Type on the root element (snapshot)","severity":"error","human":"The first element in a snapshot has no type","expression":"element.first().type.empty()","xpath":"not(f:element[1]/f:type)"},{"key":"sdf-8","severity":"error","human":"In any snapshot, all the elements must be in the specified type","expression":"element.first().path = %resource.type and element.tail().all(path.startsWith(%resource.type&'.'))","xpath":"f:element[1]/f:path/@value=parent::f:StructureDefinition/f:type/@value and count(f:element[position()!=1])=count(f:element[position()!=1][starts-with(f:path/@value, concat(ancestor::f:StructureDefinition/f:type/@value, '.'))])"},{"key":"sdf-3","severity":"error","human":"Each element definition in a snapshot must have a formal definition and cardinalities","expression":"element.all(definition and min and max)","xpath":"count(f:element) = count(f:element[exists(f:definition) and exists(f:min) and exists(f:max)])"}]}]}