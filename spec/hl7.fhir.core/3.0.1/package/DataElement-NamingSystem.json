{"resourceType":"DataElement","id":"NamingSystem","meta":{"lastUpdated":"2017-04-19T07:44:43.294+10:00"},"url":"http://hl7.org/fhir/DataElement/NamingSystem","status":"draft","experimental":true,"stringency":"fully-specified","element":[{"id":"NamingSystem","path":"NamingSystem","short":"System of unique identification","definition":"A curated namespace that issues unique symbols within that namespace for the identification of concepts, people, devices, etc.  Represents a \"System\" used within the Identifier and Coding data types.","min":0,"max":"*","constraint":[{"key":"dom-2","severity":"error","human":"If the resource is contained in another resource, it SHALL NOT contain nested Resources","expression":"contained.contained.empty()","xpath":"not(parent::f:contained and f:contained)","source":"DomainResource"},{"key":"dom-1","severity":"error","human":"If the resource is contained in another resource, it SHALL NOT contain any narrative","expression":"contained.text.empty()","xpath":"not(parent::f:contained and f:text)","source":"DomainResource"},{"key":"dom-4","severity":"error","human":"If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated","expression":"contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()","xpath":"not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))","source":"DomainResource"},{"key":"dom-3","severity":"error","human":"If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource","expression":"contained.where(('#'+id in %resource.descendants().reference).not()).empty()","xpath":"not(exists(for $id in f:contained/*/@id return $id[not(ancestor::f:contained/parent::*/descendant::f:reference/@value=concat('#', $id))]))","source":"DomainResource"},{"key":"nsd-1","severity":"error","human":"Root systems cannot have uuid identifiers","expression":"kind != 'root' or uniqueId.type = 'uuid'","xpath":"not(f:kind/@value='root' and f:uniqueId/f:type/@value='uuid')"},{"key":"nsd-3","severity":"error","human":"Can only have replacedBy if naming system is retired","expression":"replacedBy.empty() or status = 'retired'","xpath":"not(f:replacedBy) or f:status/@value='retired'"},{"key":"nsd-2","severity":"error","human":"Can't have more than one preferred identifier for a type","expression":"uniqueId.where(preferred = true).select(type).isDistinct()","xpath":"not(exists(for $type in distinct-values(f:uniqueId/f:type/@value) return if (count(f:uniqueId[f:type/@value=$type and f:preferred/@value=true()])>1) then $type else ()))"}],"mapping":[{"identity":"rim","map":"Entity. Role, or Act"},{"identity":"v2","map":"N/A"},{"identity":"rim","map":"N/A"},{"identity":"w5","map":"conformance.terminology"}]}]}