{"resourceType":"DataElement","id":"Bundle","meta":{"lastUpdated":"2017-04-19T07:44:43.294+10:00"},"url":"http://hl7.org/fhir/DataElement/Bundle","status":"draft","experimental":true,"stringency":"fully-specified","element":[{"id":"Bundle","path":"Bundle","short":"Contains a collection of resources","definition":"A container for a collection of resources.","min":0,"max":"*","constraint":[{"key":"bdl-7","severity":"error","human":"FullUrl must be unique in a bundle, or else entries with the same fullUrl must have different meta.versionId","expression":"entry.where(fullUrl).select(fullUrl&resource.meta.versionId).isDistinct()","xpath":"count(for $entry in f:entry[f:resource] return $entry[count(parent::f:Bundle/f:entry[f:fullUrl/@value=$entry/f:fullUrl/@value and ((not(f:resource/*/f:meta/f:versionId/@value) and not($entry/f:resource/*/f:meta/f:versionId/@value)) or f:resource/*/f:meta/f:versionId/@value=$entry/f:resource/*/f:meta/f:versionId/@value)])!=1])=0"},{"key":"bdl-9","severity":"error","human":"A document must have an identifier with a system and a value","expression":"type = 'document' implies (identifier.system.exists() and identifier.value.exists())","xpath":"not(f:type/@value = 'document') or exists(f:identifier/f:system) or exists(f:identifier/f:value)"},{"key":"bdl-3","severity":"error","human":"entry.request only for some types of bundles","expression":"entry.request.empty() or type = 'batch' or type = 'transaction' or type = 'history'","xpath":"not(f:entry/f:request) or (f:type/@value = 'batch') or (f:type/@value = 'transaction') or (f:type/@value = 'history')"},{"key":"bdl-4","severity":"error","human":"entry.response only for some types of bundles","expression":"entry.response.empty() or type = 'batch-response' or type = 'transaction-response'","xpath":"not(f:entry/f:response) or (f:type/@value = 'batch-response') or (f:type/@value = 'transaction-response')"},{"key":"bdl-1","severity":"error","human":"total only when a search or history","expression":"total.empty() or (type = 'searchset') or (type = 'history')","xpath":"not(f:total) or (f:type/@value = 'searchset') or (f:type/@value = 'history')"},{"key":"bdl-2","severity":"error","human":"entry.search only when a search","expression":"entry.search.empty() or (type = 'searchset')","xpath":"not(f:entry/f:search) or (f:type/@value = 'searchset')"}],"mapping":[{"identity":"rim","map":"Entity. Role, or Act"},{"identity":"v2","map":"N/A"},{"identity":"rim","map":"N/A"},{"identity":"w5","map":"infrastructure.structure"}]}]}