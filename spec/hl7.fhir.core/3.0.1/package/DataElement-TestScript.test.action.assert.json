{"resourceType":"DataElement","id":"TestScript.test.action.assert","meta":{"lastUpdated":"2017-04-19T07:44:43.294+10:00"},"url":"http://hl7.org/fhir/DataElement/TestScript.test.action.assert","status":"draft","experimental":true,"stringency":"fully-specified","element":[{"id":"TestScript.test.action.assert","path":"TestScript.test.action.assert","short":"The setup assertion to perform","definition":"Evaluates the results of previous operations to determine if the server under test behaves appropriately.","comment":"In order to evaluate an assertion, the request, response, and results of the most recently executed operation must always be maintained by the test engine.","min":0,"max":"1","contentReference":"#TestScript.setup.action.assert","constraint":[{"key":"inv-6","severity":"error","human":"Only a single assertion SHALL be present within test action assert element.","expression":"contentType.count() + expression.count() + headerField.count() + minimumId.count() + navigationLinks.count() + path.count() + requestMethod.count() + resource.count() + responseCode.count() + response.count() + rule.count() + ruleset.count() + validateProfileId.count() <=1","xpath":"count(f:contentType) + count(f:expression) + count(f:headerField) + count(f:minimumId) + count(f:navigationLinks) + count(f:path) + count(f:requestMethod) + count(f:resource) + count(f:responseCode) + count(f:response) + count(f:rule) + count(f:ruleset) + count(f:validateProfileId)  <=1"},{"key":"inv-11","severity":"error","human":"Test action assert SHALL contain either compareToSourceId and compareToSourceExpression, compareToSourceId and compareToSourcePath or neither.","expression":"compareToSourceId.empty() xor (compareToSourceExpression.exists() or compareToSourcePath.exists())","xpath":"(f:compareToSourceId and f:compareToSourceExpression) or (f:compareToSourceId and f:compareToSourcePath) or not(f:compareToSourceId or f:compareToSourceExpression or f:compareToSourcePath)"},{"key":"inv-13","severity":"error","human":"Test action assert response and response and responseCode SHALL be empty when direction equals request","expression":"(response.empty() and responseCode.empty() and direction = 'request') or direction.empty() or direction = 'response'","xpath":"((count(f:response) + count(f:responseCode)) = 0 and (f:direction/@value='request')) or (count(f:direction) = 0) or (f:direction/@value='response')"}]}]}