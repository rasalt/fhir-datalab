{"resourceType":"DataElement","id":"Media","meta":{"lastUpdated":"2017-04-19T07:44:43.294+10:00"},"url":"http://hl7.org/fhir/DataElement/Media","status":"draft","experimental":true,"stringency":"fully-specified","element":[{"id":"Media","path":"Media","short":"A photo, video, or audio recording acquired or used in healthcare. The actual content may be inline or provided by direct reference","definition":"A photo, video, or audio recording acquired or used in healthcare. The actual content may be inline or provided by direct reference.","min":0,"max":"*","constraint":[{"key":"dom-2","severity":"error","human":"If the resource is contained in another resource, it SHALL NOT contain nested Resources","expression":"contained.contained.empty()","xpath":"not(parent::f:contained and f:contained)","source":"DomainResource"},{"key":"dom-1","severity":"error","human":"If the resource is contained in another resource, it SHALL NOT contain any narrative","expression":"contained.text.empty()","xpath":"not(parent::f:contained and f:text)","source":"DomainResource"},{"key":"dom-4","severity":"error","human":"If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated","expression":"contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()","xpath":"not(exists(f:contained/*/f:meta/f:versionId)) and not(exists(f:contained/*/f:meta/f:lastUpdated))","source":"DomainResource"},{"key":"dom-3","severity":"error","human":"If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource","expression":"contained.where(('#'+id in %resource.descendants().reference).not()).empty()","xpath":"not(exists(for $id in f:contained/*/@id return $id[not(ancestor::f:contained/parent::*/descendant::f:reference/@value=concat('#', $id))]))","source":"DomainResource"},{"key":"mda-1","severity":"error","human":"Height can only be used for a photo or video","expression":"height.empty() or type != 'audio'","xpath":"not(f:type/@value='audio') or not(f:height)"},{"key":"mda-2","severity":"error","human":"Width can only be used for a photo or video","expression":"width.empty() or type != 'audio'","xpath":"not(f:type/@value='audio') or not(f:width)"},{"key":"mda-3","severity":"error","human":"Frames can only be used for a photo","expression":"frames.empty() or type = 'photo'","xpath":"(f:type/@value='photo') or not(f:frames)"},{"key":"mda-4","severity":"error","human":"Duration can only be used for an audio or a video","expression":"duration.empty() or type != 'photo'","xpath":"not(f:type/@value='photo') or not(f:duration)"}],"mapping":[{"identity":"rim","map":"Entity. Role, or Act"},{"identity":"rim","map":"Act[classCode=\"DGIMG\", moodCode=\"EVN\"]"},{"identity":"w5","map":"infrastructure.structure"}]}]}