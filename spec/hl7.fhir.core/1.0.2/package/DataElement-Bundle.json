{"resourceType":"DataElement","id":"Bundle","meta":{"lastUpdated":"2015-10-24T07:41:03.495+11:00"},"url":"http://hl7.org/fhir/DataElement/Bundle","status":"draft","experimental":true,"stringency":"fully-specified","element":[{"path":"Bundle","short":"Contains a collection of resources","definition":"A container for a collection of resources.","min":0,"max":"*","type":[{"code":"Resource"}],"constraint":[{"key":"bdl-2","severity":"error","human":"entry.search only when a search","xpath":"not(f:entry/f:search) or (f:type/@value = 'searchset')"},{"key":"bdl-1","severity":"error","human":"total only when a search or history","xpath":"not(f:total) or (f:type/@value = 'searchset') or (f:type/@value = 'history')"},{"key":"bdl-7","severity":"error","human":"FullUrl must be unique in a bundle, or else entries with the same fullUrl must have different meta.versionId","xpath":"count(for $entry in f:entry[f:resource] return $entry[count(parent::f:Bundle/f:entry[f:fullUrl/@value=$entry/f:fullUrl/@value and ((not(f:resource/*/f:meta/f:versionId/@value) and not($entry/f:resource/*/f:meta/f:versionId/@value)) or f:resource/*/f:meta/f:versionId/@value=$entry/f:resource/*/f:meta/f:versionId/@value)])!=1])=0"},{"key":"bdl-3","severity":"error","human":"entry.request only for some types of bundles","xpath":"not(f:entry/f:request) or (f:type/@value = 'batch') or (f:type/@value = 'transaction') or (f:type/@value = 'history')"},{"key":"bdl-4","severity":"error","human":"entry.response only for some types of bundles","xpath":"not(f:entry/f:response) or (f:type/@value = 'batch-response') or (f:type/@value = 'transaction-response')"}],"isSummary":true,"mapping":[{"identity":"v2","map":"N/A"},{"identity":"rim","map":"N/A"},{"identity":"w5","map":"infrastructure.structure"}]}]}